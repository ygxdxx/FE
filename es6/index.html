<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>Title</title></head><body></body><script>    function func(condition) {        if (condition) {            var value = 'hello';            return value;        } else {            console.log(value);            return null;        }    }    // console.log(func(false));    {        var value = 'hello';    }    console.log(value);    {        var funcs = [];        for (var i = 0; i < 10; i++) {            funcs.push((function (val) {                return function () {                    console.log(val);                }            })(i));        }        funcs.forEach(function (func, index) {            func();        });    }    var text = "";    console.log(text.length);    {        function mixArgs(first, second = 'b') {            console.log(arguments.length); //1            console.log(first === arguments[0]); //true            console.log(second === arguments[1]); //false            console.log(arguments[1]); //undefined            first = 'c';            second = 'b';            console.log(first === arguments[0]); //false            console.log(second === arguments[1]); //false        }        mixArgs('a');    }    {        //暂时性锁死区        function getValue(arg) {            return arg + 1;        }        function add(first, second = getValue(first)) {            console.log(first + second);        }        add(1, 1); //2        add(1); //3    }    {        // function pick(obj) {        //     let result = Object.create(null);        //        //     for (let i = 1, len = arguments.length; i < len; i++) {        //         result[arguments[i]] = obj[arguments[i]];        //     }        //        //     return result;        // }        function pick(obj, ...keys) {            let result = Object.create(null);            for (let i = 0, len = keys.length; i < len; i++) {                result[keys[i]] = obj[keys[i]];            }            return result;        }        let book = {            title: "Understanding ES6",            author: "Nicholas C. Zakas",            year: 2015        };        console.log(pick(book, 'author', 'year')); //{author:'Nicholas C. Zakas',year:2005}    }    {        const values = [22, 11, 5, 2, 4, 7];        console.log(Math.max(...values));    }    // {    //    //     function Person(name) {    //         this.name = name;    //     }    //    //     var person = new Person('小明');    //     var notPerson = Person('小明');    //    //     console.log(person); //Person对象    //     console.log(notPerson); //undefined    // }    {        function Person(name) {            if (this instanceof Person) {                this.name = name;            } else {                throw new Error('new with Person');            }        }        var person = new Person('小明'); //可以正常运行 [[constructor]]        Person.call(person, '小明'); //也可以运行    }    {        let s = 2;        let PageHandler = {            id: '123',            init: function () {                // document.addEventListener('click', (function (event) {                //     this.print('click')                // }).call(this), false);                document.addEventListener('click', event => this.print('click'), false);            },            print: function (type) {                console.log('handling' + type + 'for' + this.id);            }        };        PageHandler.init();    }    {        function mixin(receiver, supplier) {            Object.keys(supplier).forEach(function (key) {                receiver[key] = supplier[key];            });            return receiver;        }        function EventTarget() {        }        EventTarget.prototype = {            constructor: EventTarget,            emit: function () {                console.log('emit');            },            on: function () {            }        };        let obj = {};        mixin(obj, EventTarget);    }    // {    //    //     //改写对象原型    //     let dog = {    //         say() {    //             console.log('woof!');    //         }    //     };    //    //     let person = {    //         say() {    //             console.log('hello');    //         }    //     };    //    //     let friend = Object.create(person);    //     console.log(Object.getPrototypeOf(friend) === person); //true    //     friend.say(); //hello    //    //     let d = Object.create(dog);    //     d.say(); //woof!    //    //     Object.setPrototypeOf(friend,d);    //     console.log(Object.getPrototypeOf(friend) === person); //false    //     friend.say(); //woof!    //    // }    // {    //     let person = {    //         say() {    //             return 'hello';    //         }    //     };    //    //     let friend = {    //         say() {    //             return Object.getPrototypeOf(this).say() + 'hi';    //         }    //     };    //    //     Object.setPrototypeOf(friend, person);    //     console.log(friend.say())    // }    {        let person = {            say() {                return 'hello';            }        };        let friend = {            say() {                return super.say.call(this) + ' hi'; //super没问题                // return Object.getPrototypeOf(this).say.call(this) + ' hi'; //有问题            }        };        Object.setPrototypeOf(friend, person); //修改friend的原型为person,实现了继承        console.log(friend.say());// hello hi        let relative = Object.create(friend); //relative指向friend的原型        console.log(relative.say()); //无限循环指向，调用栈爆掉了    }    {        let node = {            type: 'bar',            name: 'foo'        };        let {type, name} = node;        console.log(type);        console.log(name);    }    {        //    解构        let colors = ["red", ["green", "lightgreen"], "blue"];// 随后        let [firstColor, [secondColor]] = colors;        console.log(firstColor);// "red"        console.log(secondColor);// "green"    }    {        let firstName = Symbol('first name');        let person = {            [firstName]: 'hehe'        };        console.log(person[firstName]);    }    {        let map = Object.create(null);        // map.count = 0;        map.count = 1;        if (map.count) {            console.log('hello');        }    }    {        let set = new Set([1, 2, 3]); //创建        set.add('3'); //添加        console.log(set.size); //打印长度        set.has(3); //判断        set.delete(3); //删除        let arr = [...set]; //将set转换为数组    }    // {    //     let set = new Set([1, 2, 3, 4]);    //     let processor = {    //         ouput(val) {    //             console.log(val);    //         },    //         process(dataset) {    //             dataset.forEach((val1, val2) => this.ouput(val1));    //             // dataset.forEach(function (val1, val2) {    //             //     this.output(val1);    //             // }, this)    //         }    //     };    //     processor.process(set);    // }    {        let map = new Map([['name', '小明'], ['age', 18]]);        let processor = {            output(key, val) {                console.log(key, ' + ', val);            },            process(mapset) {                mapset.forEach((val, key) => this.output(key, val))            }        };        processor.process(map);    }    // {    //     //ES5模拟迭代器    //     function mockIterator(items) {    //         let i = 0;    //         return {    //             next: function () {    //                 let done = (i >= items.length);    //                 let value = !done ? items[i++] : undefined;    //                 return {    //                     value,    //                     done,    //                 }    //             }    //         };    //     }    //    //     let iterator = mockIterator([1, 2, 3]);    //     console.log(iterator.next()); //{value: 1, done: false}    //     console.log(iterator.next()); //{value: 2, done: false}    //     console.log(iterator.next()); //{value: 3, done: false}    //     console.log(iterator.next()); //{value: undefined, done: true}    // }    // {    //     //生成器    //     function* generator() {    //         yield  1;    //         yield  2;    //         yield  3;    //     }    //    //     let iterator = generator();    //     console.log(iterator.next()); //{value: 1, done: false}    //     console.log(iterator.next()); //{value: 2, done: false}    //     console.log(iterator.next()); //{value: 3, done: false}    //     console.log(iterator.next()); //{value: undefined, done: true}    // }    {        function* generator(items) {            for (let i = 0, len = items.length; i < len; i++) {                yield items[i];            }        }        let iterator = generator([1, 2, 3]);        console.log(iterator.next()); //{value: 1, done: false}        console.log(iterator.next()); //{value: 2, done: false}        console.log(iterator.next()); //{value: 3, done: false}        console.log(iterator.next()); //{value: undefined, done: true}    }    {        let map = new Map();        map.set('a', 1);        map.set('b', 2);        map.set('c', 3);        for (let entry of map.entries()) {            console.log(entry);        }        //解构也可以一起使用        for (let [key, value] of map.entries()) {            console.log(key, ' + ', value);        }    }    {        //模仿类        function PersonType(name) {            this.name = name;        }        //将方法添加到函数的原型上，这样一来通过函数创建的对象都会拥有这个方法        PersonType.prototype.sayName = function () {            console.log(this.name);        };        let person = new PersonType('hehe');        person.sayName();    }    {        //class        let PersonClass = class {            //相当于构造函数            constructor(name = 'test') {                this.name = name;            }            //相当于PersonClass.prototype.sayName = xxx            sayName() {                console.log(this.name);            }        };        let person = new PersonClass();        console.log(person instanceof PersonClass); //true        console.log(person instanceof Object); //true        console.log(typeof PersonClass); //function        console.log(typeof PersonClass.prototype.sayName); //function    }    {        function createObject(classDef) {            return new classDef();        }        let obj = createObject(class {            sayHi() {                console.log('hi');            }        });        obj.sayHi();    }    {        //创建单例        let person = new class {            constructor(name) {                this.name = name;            }            sayName() {                console.log(this.name);            }        }('test');        person.sayName();    }    {        function sayName(label) {            console.log(label + ':' + this.name);        }        let person1 = {            name: 'person1'        };        let person2 = {            name: 'person2'        };        // sayName.call(person1,'call');        sayName.bind(person1, 'bind')();    }    {        class CustomHTMLElement {            constructor(element) {                this.element = element;            }            get html1() {                return this.element.innerHTML;            }            get html() {                return this.element.innerHTML;            }            set html(val) {                this.element.innerHTML = val;            }        }    }    {        class IteratorClaz {            constructor() {                this.items = [];            }            * [Symbol.iterator]() {                yield* this.items.values();            }        }        let clz = new IteratorClaz();        clz.items.push(1);        clz.items.push(2);        clz.items.push(3);        for (let val of clz) {            console.log(val);        }    }    {        //    工厂模式        function PersonType2(name) {            this.name = name;        }        //静态方法        PersonType2.create = function (name) {            return new PersonType2(name);        };        //实例方法        PersonType2.prototype.sayHi = function () {            console.log(this.name);        };        let person = PersonType2.create('test');        person.sayHi();    }    {        class PersonType3 {            constructor(name) {                this.name = name;            }            //相当于PersonType3.prototype.sayName            sayName() {                console.log(this.name);            }            //相当于PersonType3.create            static create(name) {                return new PersonType3(name);            }        }    }    {        function Rectangle(width, height) {            this.width = width;            this.height = height;        }        Rectangle.prototype.compute = function () {            return this.width * this.height;        };        function Square(length) {            Rectangle.call(this, length, length);        }        Square.prototype = Rectangle.prototype;        let square = new Square(3);        console.log(square.compute());        console.log(square instanceof Rectangle);    }    // {    //     //    promise    //     let fs = require('fs');    //    //     function readFile(filename) {    //         return new Promise(function (resolve, reject) {    //             fs.readFile(filename, {encoding: 'utf-8'}, function (err, contents) {    //                 if (err) {    //                     reject(err);    //                     return;    //                 }    //    //                 resolve(contents);    //             })    //         });    //     }    //    //     let promise = readFile('test');    //     promise.then(function (contents) {    //         console.log(contents);    //     }, function (err) {    //         console.error(err.message);    //     });    //    // }    // {    //     let promise = Promise.resolve(41);    //     promise.then(function (val) {    //         console.log(val);    //     });    //    //     let promise2 = Promise.reject(42);    //     promise2.catch(function (err) {    //         // console.error(err);    //     })    // }    // {    //     //    代理    //     let target = {};    //     let proxy = new Proxy(target, {}); //陷阱函数为空    //     proxy.name = 'proxy';    //     console.log(target.name); //"proxy"    //     target.name = 'target';    //     console.log(proxy.name); //"target"    // }    {        let target = {            name: 'target',        };        let proxy = new Proxy(target, {            //接收属性的对象,键,值,代理对象            set(trapTarget, key, value, receiver) {                if (!trapTarget.hasOwnProperty(key)) {                    if (isNaN(value)) {                        throw new TypeError('Must be a number');                    }                }                return Reflect.set(trapTarget, key, value, receiver); //set在陷阱函数所对应的反射方法            }        });        proxy.count = 1;        console.log(target.count); //1        // proxy.anotherName = 'another'; //Must be a number    }    {        let person = {};        Object.defineProperties(person, {            _name: {                value: 'test',                enumerable: true,                configurable: true,                writable: true            },            name: {                set: function (val) {                    console.log(val);                    this._name = val;                },                get: function () {                    return this._name;                },                enumerable: true,                configurable: true            }        })    }    {        let obj = {};        console.log(obj.constructor);        console.log(obj.__proto__);    }    {        console.log('对象');        function Obj() {        }        Obj.prototype = {            constructor: Obj        };        let obj = new Obj();        //constructor都是原型对象中的constructor，指向了函数本身        //使用字面量对象对prototype对象进行重写后，constructor会指向Object        console.log(obj.constructor);        console.log(Obj.prototype.constructor);        //下面两个都指向原型对象        console.log(obj.__proto__);        console.log(Obj.prototype);    }    {        //继承        //Object.create()的方式        let person1 = {            name: '小明',            sayName() {                console.log(this.name);            }        };        let person2 = Object.create(person1, {            name: {                configurable: true,                value: '小红',                writable: true,                enumerable: true            }        });        person1.sayName(); //小明        person2.sayName(); //小红        console.log(person1.hasOwnProperty('sayName')); //true        console.log(person1.isPrototypeOf(person2)); //true        console.log(person2.hasOwnProperty('sayName')); //false        console.log(person2.__proto__);    }    {        //继承        //原型对象改写方式        function Rectangle2(length, width) {            this.length = length;            this.width = width;        }        Rectangle2.prototype.getArea = function () {            return this.length * this.width;        };        Rectangle2.prototype.toString = function () {            return `[Rectangle]  ${this.length} x ${this.width}`;        };        function Square2(size) {            this.length = size;            this.width = size;        }        Square2.prototype = new Rectangle2();        Square2.prototype = new Rectangle2();        Square2.prototype.constructor = Square2;        Square2.prototype.toString = function () {            return `[Square2]  ${this.length} x ${this.width}`;        };        let rect = new Rectangle2(2, 3);        let sq = new Square2(3);        console.log(rect.getArea());        console.log(sq.getArea());        console.log(Object.getPrototypeOf(rect));        console.log(Object.getPrototypeOf(sq));    }</script></html>